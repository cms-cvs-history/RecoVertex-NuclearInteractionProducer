process NUCLEAR =  {
    service = MessageLogger
    {
                untracked vstring destinations = { "cout", "out" } # .log automatically
              #  untracked vstring statistics = { "cout", "nuclearseeding"}

                untracked vstring categories = { "NuclearSeedGenerator", "CkfPattern", "NuclearInteractionMaker" }
              #  untracked vstring categories = { "CkfPattern", "NuclearInteractionMaker" }

                untracked PSet out    = {
                        untracked string threshold = "DEBUG"
                        untracked PSet DEBUG = { untracked int32 limit = 0 }
                        untracked PSet NuclearSeedGenerator = { untracked int32 limit = 0}
                        untracked PSet CkfPattern = { untracked int32 limit = 0}
                        untracked PSet NuclearInteractionMaker = { untracked int32 limit = 0}
                        untracked bool noLineBreaks = true
                }
                untracked vstring debugModules = { "nuclearSeed", "ckfTrackCandidates" , "nuclearInteractionMaker"}

                untracked PSet cout  = {
                        untracked string threshold = "INFO"
                        untracked PSet INFO = { untracked int32 limit = 0 }
                        untracked PSet WARNING = { untracked int32 limit = 0 }
                        untracked PSet ERROR = { untracked int32 limit = 0 }
                        untracked PSet DEBUG = { untracked int32 limit = 0 }
                        untracked bool noLineBreaks = true
                }

    }


source = PoolSource
  {
      untracked vstring fileNames = { 'file:/home/fynu/roberfro/scratch/CMSSW_2_0_0/src/Config/test/SinglePion.root' }

  }
replace PoolSource.fileNames = {
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/2E70AB99-AE3E-DD11-8292-000423D6B42C.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/5EC08864-AE3E-DD11-A4A3-000423D6B42C.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/92278625-AF3E-DD11-AC52-000423D174FE.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/9ECF6221-AF3E-DD11-B095-000423D98C20.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/AE99EEF2-AE3E-DD11-9CB4-001617C3B710.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/C80F978D-AE3E-DD11-A50F-001617C3B778.root',
'/store/relval/2008/6/20/RelVal-RelValSinglePiPt100-1213920853-IDEAL_V2-2nd/0000/CAC8B793-AE3E-DD11-A23B-001617C3B6E8.root'
}




   untracked PSet maxEvents = {untracked int32 input = 50}

   include "Configuration/StandardSequences/data/FakeConditions.cff"
   include "Configuration/StandardSequences/data/Reconstruction.cff"

    # Refitter
    include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cff"
    replace TrackRefitter.TrajectoryInEvent = true

    # Nuclear Seeding
    include "RecoVertex/NuclearInteractionProducer/data/NuclearInteraction.cff"
    include "RecoVertex/NuclearInteractionProducer/data/out_in.cff"
    replace nuclearInteractionMaker.additionalSecondaryProducer="outInWithMaterialTracks"

    # Track Correction
    include "RecoTracker/NuclearSeedGenerator/data/NuclearTrackCorrector.cfi"

    #Tracking truth
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingtruthprod.HepMCDataLabels = {"source"}

include "MagneticField/Engine/data/uniformMagneticField.cfi"
    replace UniformMagneticFieldESProducer.ZFieldInTesla = 4.0 
    es_prefer = UniformMagneticFieldESProducer{}

    include "RecoVertex/BeamSpotProducer/data/BeamSpot.cfi"

    module dump = EventContentAnalyzer{}

    module Out = PoolOutputModule
    {
     untracked string fileName = "file:single_pi_10gev_corrected.root"
#     untracked vstring outputCommands = {
#           "drop *",
#           "keep CrossingFrame_*_*_*",
#           "keep *_siStripDigis_*_*",
#           "keep *_siPixelDigis_*_*",
#           "keep *_siPixelClusters_*_*",
#           "keep *_siStripClusters_*_*",
#           "keep *_simSiPixelDigis_*_",
#           "keep *_simSiStripDigis_*_",
#           "keep *_*_*_NUCLEAR",
#           "keep TrackingVertexs_*_*_*",
#           "keep TrackingParticles_*_*_*",
#           "keep recoVertexs_*_*_*",
#           "keep recoTracks_generalTracks_*_*",
#           "keep recoBeamSpot_offlineBeamSpot_*_"
#     }
    
    }

   #path p = { offlineBeamSpot, TrackRefitter, out_in_tracks, nuclear_interaction}
   path p = { offlineBeamSpot, siPixelRecHits,siStripMatchedRecHits, ckftracks, out_in_tracks, nuclear_interaction, trackCorrector}
   #path p = { offlineBeamSpot, TrackRefitter, nuclear_interaction}

    #path p = { dump }

   endpath e =
   {
     Out
   }
}
